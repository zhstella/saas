<h1>CU Blue Board</h1>
<%= link_to "New Post", new_post_path %>

<hr>

<h2>Search Posts</h2>
<%= form_with(url: posts_path, method: :get, local: true) do |f| %>
  <%= f.label :query, "Search:" %>
  <%= f.text_field :query, value: params[:query] %>
  <%= f.submit "Search" %>
<% end %>

<hr>

<h2>Post List</h2>
<div id="posts">
  <% @posts.each do |post| %>
    <div>
      <h3>
        <%= link_to post.title, post_path(post) %>
      </h3>
      <p>
        Posted by: <%= display_author(post.user) %>
      </p>
      <p>
        <span>👍 <%= post.likes.count %></span> | 
        <span>💬 <%= post.comments.count %></span>
      </p>

      <% if current_user == post.user %>
        <%= button_to "Delete Post", post_path(post), method: :delete, data: { confirm: 'Are you sure?' } %>
      <% end %>
    </div>
    <hr>
  <% end %>
</div>
